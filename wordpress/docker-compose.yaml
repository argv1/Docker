version: '3'

networks:
  dockervlan:
    external: true
    
services:
  wordpress:
    image: wordpress:latest
    container_name: wordpress
    volumes: 
      - /home/docker/wordpress:/var/www/html
    ports:
      - 80:80
    environment:
      - "WORDPRESS_DB_USER=root"
      - "WORDPRESS_DB_PASSWORD=STRONGPASSWORD"
    dns: 192.168.178.200
    networks:
      dockervlan:
        ipv4_address: 192.168.178.197
    security_opt:
      - no-new-privileges:true
    restart: unless-stopped

  mysql:
    image: mariadb:latest
    container_name: mariadb
    volumes:
      - /home/docker/wordpress/wp-db:/var/lib/mysql
    restart: unless-stopped
    environment:
      - "MYSQL_ROOT_PASSWORD=STRONGPASSWORD"
      - "MYSQL_DATABASE=wordpress"
    networks:
      dockervlan:
        ipv4_address: 192.168.178.198
  phpmyadmin:
    image: phpmyadmin:latest
    container_name: phpmyadmin
    environment:
     - PMA_ARBITRARY=1
    ports:
     - 9999:80
    volumes:
      - /home/docker/wordpress/myphpadmin
    restart: unless-stopped
    networks:
      dockervlan:
        ipv4_address: 192.168.178.199
